<div id="content">

<style type="text/css">
  ul.dynatree-container span.td {
     position: absolute;
     display: inline;
     border-size: 1px;
     overflow: hidden;
     background-color: white;
  }
  ul.dynatree-container span.td:nth-child(1) {
     position: static;
  }
  ul.dynatree-container span.td:nth-child(2) {
     left: 500px;
     width: 120px;
  }
  ul.dynatree-container span.td:nth-child(3) {
     left: 650px;
     width: 80px;
     border: 1px solid #CCCCCC;
     padding: 0em 0.5em;
  }
  ul.dynatree-container span.td:nth-child(4) {
     left: 730px;
     width: 80px;
     border: 1px solid #CCCCCC;
     padding: 0em 0.5em;
  }
  ul.dynatree-container span.td:nth-child(5) {
     left: 810px;
     width: 80px;
     border: 1px solid #CCCCCC;
     padding: 0em 0.5em;
  }
  ul.dynatree-container span.td:nth-child(6) {
     left: 890px;
     width: 80px;
     border: 1px solid #CCCCCC;
     padding: 0em 0.5em;
  }
  </style>

  <script src="js/progress.js" type="text/javascript"></script>

  <script type="text/javascript">
	  function initTree() {

         jQuery("#tree").dynatree({
             initAjax: {
      		   type: "POST",
               url: 'include/dynatree_ajax.php',
               data: { wbsRootId: "{$wbsRootId}",
                       hasDetail: "1",
                       action: "loadWBS"
               }
             },
             onCustomRender: function(node) {

               // Render title as columns
               if( (null == node.data.title) ||
                   (node.data.title.indexOf("~") === -1)) {
                 // Default rendering
                 return false;
               }
               var cols = node.data.title.split("~"),
               html = "<a class='dynatree-title' href='#'>";
               html += "<span class='td'>" + cols[0] + "</span>";
              if(cols.length > 1) {

                // progress column
                html += "<span class='td'><div class='progress ui-progressbar ui-widget ui-widget-content ui-corner-all' ";
                html += "role='progressbar' aria-valuemin='0' aria-valuemax='100' aria-valuenow='" + cols[1] + "'>";
                html += "<div class='ui-progressbar-value ui-widget-header ui-corner-left' style='width: " + cols[1] + "%;'>";
                html += "<div>" + cols[1] + "%</div></div></div></span>";

                // other columns
                html += "<span class='td'>" + cols[2] + "</span>";
                html += "<span class='td'>" + cols[3] + "</span>";
                html += "<span class='td'>" + cols[4] + "</span>";
                html += "<span class='td' style='background-color:#"+cols[6]+"' >" + cols[5] + "</span>";
              }
               return html + "</a>";
             }

         });

	  }
	  window.onload = initTree;
  </script>

   <!--a id="bt_loadTree" style="text-decoration: none" href="{$page}"><img align="absmiddle" src="images/b_refresh.png" style="vertical-align: middle;" title="{t}Load{/t}"> Load</a-->
   <div id="tree">
   </div>

</div>

   <script type="text/javascript">
   jQuery(document).ready(function() {
       jQuery("#bt_loadTree").click(function(event) {
          event.preventDefault();
          $("#tree").dynatree("destroy");
          initTree();
       });
    });
   </script>